LOCAL_DIR := $(PWD)

ifndef FINS_ROOT_DIR
FINS_ROOT_DIR := $(LOCAL_DIR)/../../..
export FINS_ROOT_DIR
endif

# fins.mk contains the compiler and linker options for each target platform
include $(FINS_ROOT_DIR)/settings.finsmk

#Name of the module
PROJECT_NAME = glue

GLUE_INC = -I.
CFLAGS += $(GLUE_INC)

OBJS = glue.o

#This is an autogenerated list of includes used in this project
INCLUDES = $(shell ls $(subst -I,, $(GLUE_INC)) | grep \\.h)



#### TARGETS #####
.PHONY:all
all:$(PROJECT_NAME)
	@echo "$(PROJECT_NAME) is compiled\n"
#	@ar rvs lib$(PROJECT_NAME).a $(OBJS)

$(PROJECT_NAME):$(OBJS)  
	@echo $(addprefix "$(shell pwd)/", $(OBJS)) > OBJS.finsmk  

%.o:%.c $(INCLUDES) 
	@$(CC) $(CFLAGS) -c $< -o $@

.PHONY:clean
clean:
	@rm -f *.o *.a
	@rm -f OBJS.finsmk
	
.PHONY:test
test:
	@echo "FINS_ROOT_DIR='$(FINS_ROOT_DIR)'"
	@echo "OBJS='$(OBJS)'"
	@echo "GLUE_INC='$(GLUE_INC)'"
	@echo "CFLAGS='$(CFLAGS)'"
	@echo "INCLUDES='$(INCLUDES)'"
	@echo "CC='$(CC)'"
